<!-- TODO: aria stuff I guess -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>GitHub Star Checker: Check when a user starred a repository</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Check when a specific GitHub user starred a repository. Enter a username and repository to find the star timestamp."
    />
    <meta property="og:title" content="GitHub Star Checker" />
    <meta
      property="og:description"
      content="Check when a specific GitHub user starred a repository. Enter a username and repository to find the star timestamp."
    />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="GitHub Star Checker" />
    <meta
      name="twitter:description"
      content="Check when a specific GitHub user starred a repository. Enter a username and repository to find the star timestamp."
    />
    <script src="https://unpkg.com/localstorage-slim@2.7.1/dist/localstorage-slim.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@4.0.2/dist/timeago.min.js"></script>
    <script defer type="module" src="main.js"></script>

    <style>
      :root {
        --background-color: #f5f5f5;
        --primary-accent-color: #1e7c7f;
        --primary-dark-accent-color: #135b5e;
        --primary-light-accent-color: #69c4c7;
        --disabled-accent-color: darkslategray;
        --error-color: #c70101;
        --success-color: #28a745;
        --admonition-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTEzIDloLTJWN2gybTAgMTBoLTJ2LTZoMm0tMS05QTEwIDEwIDAgMCAwIDIgMTJhMTAgMTAgMCAwIDAgMTAgMTAgMTAgMTAgMCAwIDAgMTAtMTBBMTAgMTAgMCAwIDAgMTIgMnoiLz48L3N2Zz4K");
      }

      html,
      body {
        width: 100%;
        height: 100%;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      }

      body {
        display: flex;
        box-sizing: border-box;
        max-width: 480px;
        padding: 40px 20px 5px 20px;
        margin: 0 auto 0 auto;
        flex-direction: column;
        background-color: var(--background-color);
      }

      a {
        color: var(--primary-accent-color);
      }

      output {
        display: block;
      }

      .admonition {
        position: relative;
        border-radius: 0.2rem;
        overflow: hidden;
        box-shadow: 0 0.2rem 0.5rem rgb(0 0 0 / 5%),
          0 0 0.0625rem rgb(0 0 0 / 10%);
        font-size: 0.85rem;
      }

      .admonition-header {
        margin: 0;
        padding: 0.5rem;
        padding-left: 2rem;
        background-color: var(--primary-accent-color);
        color: white;
        font-weight: bold;
      }

      .admonition-header::before {
        display: block;
        width: 1rem;
        height: 1rem;
        content: "";
        position: absolute;
        left: 0.5rem;
        background-color: white;
        mask-image: var(--admonition-icon);
      }

      .admonition-body {
        margin: 0.7rem;
      }

      h1,
      h2,
      .input-container,
      .check-button,
      .output-text-container,
      footer {
        padding: 10px 0;
        margin: auto;
        box-sizing: border-box;
        text-align: center;
      }

      h2 {
        font-size: 1.3rem;
        font-weight: 400;
      }

      .input-form {
        padding: 15px 0;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .input-container {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding: 0;
      }

      .username-input,
      .repo-input,
      .check-button {
        width: 100%;
        border: 2px solid var(--primary-accent-color);
        font-size: 1rem;
        padding: 10px 15px;
        box-sizing: border-box;
      }

      .username-input {
        border-radius: 4px;
      }

      .repo-input {
        border-radius: 4px;
      }

      .username-input:read-only,
      .repo-input:read-only,
      .check-button:disabled {
        transition: filter 300ms, border-color 300ms, color 300ms;
        filter: grayscale(80%);
        border-color: var(--disabled-accent-color);
      }

      .username-input:read-only,
      .repo-input:read-only {
        color: var(--disabled-accent-color);
      }

      .check-button {
        background-color: var(--primary-accent-color);
        color: white;
        border-radius: 4px;
      }

      .check-button:hover:enabled {
        transition: background-color 250ms;
        background-color: var(--primary-dark-accent-color);
        cursor: pointer;
      }

      .check-button:active {
        transition: background-color 50ms;
        background-color: var(--primary-light-accent-color);
      }

      .output-text-container p {
        margin-top: 0;
      }

      .result-text {
        font-size: 0.95rem;
        color: var(--primary-accent-color);
        word-break: break-all;
      }

      .star-info {
        font-family: "SF Mono", "Monaco", "Inconsolata", "Fira Mono",
          "Droid Sans Mono", "Source Code Pro", monospace;
        background-color: #e8e8e8;
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
        font-size: 0.85rem;
        text-align: left;
        width: 100%;
        box-sizing: border-box;
      }

      .star-info-line {
        margin: 4px 0;
        padding: 4px;
        border-radius: 2px;
      }

      .info-note {
        font-size: 0.75rem;
        color: #666;
        margin-top: 5px;
        font-style: italic;
        word-break: normal;
        overflow-wrap: break-word;
        hyphens: none;
      }

      .relative-time {
        color: #888;
        font-size: 0.9em;
      }

      .how-it-works {
        margin-top: 30px;
        position: relative;
        border-radius: 0.2rem;
        overflow: hidden;
        box-shadow: 0 0.2rem 0.5rem rgb(0 0 0 / 5%),
          0 0 0.0625rem rgb(0 0 0 / 10%);
        font-size: 0.85rem;
        width: 100%;
        box-sizing: border-box;
      }

      .how-it-works-header {
        margin: 0;
        padding: 0.5rem;
        padding-left: 2rem;
        background-color: var(--primary-accent-color);
        color: white;
        font-weight: bold;
      }

      .how-it-works-header::before {
        display: block;
        width: 1rem;
        height: 1rem;
        content: "";
        position: absolute;
        left: 0.5rem;
        background-color: white;
        mask-image: var(--admonition-icon);
      }

      .how-it-works-body {
        margin: 0.7rem;
      }

      .how-it-works-body a {
        color: var(--primary-accent-color);
        text-decoration: underline;
      }

      footer {
        margin-top: auto;
        margin-bottom: 0;
        font-size: 0.85rem;
      }

      footer p {
        margin: 3px;
      }

      #tip-admonition {
        position: absolute;
        top: 15px;
        left: 15px;
        width: clamp(200px, 22vw, 400px);
      }

      @media (max-width: 900px) {
        #tip-admonition {
          display: none;
        }
      }

      .error {
        color: var(--error-color);
      }
    </style>
  </head>

  <body>
    <main>
      <h1>GitHub Star Checker</h1>
      <h2>Check when a user starred a repository.</h2>
      <div class="input-form">
        <div class="input-container">
          <input
            class="username-input"
            placeholder="GitHub username"
            type="text"
            autocapitalize="off"
            autofocus
          />
          <input
            class="repo-input"
            placeholder="Repository (owner/repo)"
            type="text"
            autocapitalize="off"
          />
        </div>
        <button class="check-button">Check</button>
      </div>
      <div class="output-text-container">
        <i><p class="working-status-text"></p></i>
        <output class="result-text"></output>
      </div>
      <div class="how-it-works">
        <p class="how-it-works-header">How it works</p>
        <p class="how-it-works-body">
          This web tool finds when a user starred a repository by querying the
          GitHub API. To minimise the number of API calls incurred, it first
          compares the user's total starred repositories against the repo's
          total stargazers, then queries whichever list is smaller (thanks to
          <a href="https://stackoverflow.com/a/30638428" target="_blank"
            >this Stack Overflow answer</a
          >). It then merges the results from the "stargazers for a repo" and
          "starred repos for a user" endpoints to find the exact timestamp when
          the user starred the repository.
        </p>
      </div>
    </main>
    <footer>
      <p>
        This website's design was largely inspired by
        <a href="https://github.com/Mariatta/check_python_cla"
          >Mariatta's "Check Python CLA"</a
        >
        and
        <a href="https://github.com/ichard26/next-pr-number"
          >Richard Si's "Next PR Number"</a
        >
        tools.
      </p>
      <hr />
      <p>
        <a href="https://github.com/agriyakhetarpal/github-star-checker"
          >Source code</a
        >
      </p>
    </footer>
    <div id="tip-admonition" class="admonition">
      <p class="admonition-header">Tip!</p>
      <p class="admonition-body">
        You may use URL query parameters to pre-fill the inputs. For example:
        <code>?username=octocat&repo=hello-world</code>
      </p>
    </div>
  </body>
</html>
